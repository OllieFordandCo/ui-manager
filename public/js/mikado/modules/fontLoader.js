"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FontLoader=function(){function e(){_classCallCheck(this,e),this.w=window,this.doc=document,this.html=this.doc.documentElement,this.now=Date.now||function(){return(new Date).getTime()},this.format="",this.init()}return _createClass(e,[{key:"supportsWoff2",value:function(){if(!("FontFace"in window))return!1;var e=new FontFace("t",'url( "data:application/font-woff2;base64,d09GMgABAAAAAADcAAoAAAAAAggAAACWAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk4ALAoUNAE2AiQDCAsGAAQgBSAHIBtvAcieB3aD8wURQ+TZazbRE9HvF5vde4KCYGhiCgq/NKPF0i6UIsZynbP+Xi9Ng+XLbNlmNz/xIBBqq61FIQRJhC/+QA/08PJQJ3sK5TZFMlWzC/iK5GUN40psgqvxwBjBOg6JUSJ7ewyKE2AAaXZrfUB4v+hze37ugJ9d+DeYqiDwVgCawviwVFGnuttkLqIMGivmDg" ) format( "woff2" )',{});return e.load()["catch"](function(){}),"loading"===e.status||"loaded"===e.status}},{key:"loadFallback",value:function(e){var t=document.createElement("style"),n=e.href+this.format,o=e.dataset.name,a="weight"in e.dataset?e.dataset.weight:"normal",i="style"in e.dataset?e.dataset.style:"normal",s=document.createTextNode("\n        @font-face {\n            font-family: "+o+";\n            src: url('"+n+"') format('woff');\n            font-weight:"+a+'";\n            font-style:'+i+'";\n        }\n        ');t.appendChild(s),document.head.appendChild(t)}},{key:"loadNativeFont",value:function(e){var t=e.href+this.format,n=e.dataset.name,o=n.replace(" ","-"),a="weight"in e.dataset?e.dataset.weight:"normal",i="style"in e.dataset?e.dataset.style:"normal";console.log(t);var s=new FontFace(n,"url("+t+")",{style:i,weight:a});s.loaded.then(function(e){document.documentElement.classList.add(o+"-"+a+"-"+i+"-"+e.status)}),document.fonts.add(s)}},{key:"loadDeferredFonts",value:function(){var e=this.doc,t=this;this.w.addEventListener("load",function(){var n=e.getElementById("deferred-fonts");n?requestAnimationFrame(function(){setTimeout(function(){var e=document.createElement("div");e.innerHTML=n.textContent,document.body.appendChild(e),n.parentElement.removeChild(n),requestAnimationFrame(function(){setTimeout(function(){document.documentElement.className=document.documentElement.className.replace("css-loading","css-loaded"),setTimeout(function(){console.log("Info: All styles loaded, wait and trigger load."),t.triggerLoad()},400)},0)})},0)}):(console.log("Info: Deferred Fonts not found, skipping to Base Load"),t.triggerLoad())})}},{key:"triggerEvent",value:function(e){var t=new CustomEvent(e);return document.dispatchEvent(t),console.log(e),!1}},{key:"triggerLoad",value:function(){var e=this;this.doc.addEventListener("afterLoad",function(){console.log("Event: The base has been loaded!"),e.init()}),this.triggerEvent("afterLoad")}},{key:"init",value:function(){var e=this,t=document.querySelectorAll('link[as="font"]');if(0===t.length)return void e.loadDeferredFonts();var n=this.supportsWoff2();if("FontFace"in window)console.log("Font Face API supported."),[].forEach.call(t,function(t){n||(t.href=t.href.substring(0,t.href.length-1)),e.loadNativeFont(t),t.parentElement.removeChild(t)});else{console.log("Font Face API not supported.");for(var o=0;o<t.length;o++){var a=t[o];console.log(n),n||(a.href=a.href.substring(0,a.href.length-1)),this.loadFallback(a),a.parentElement.removeChild(a)}}"fonts"in document?document.fonts.ready.then(function(){document.documentElement.classList.add("fonts-loaded")}):document.documentElement.classList.add("fonts-loaded")}}]),e}();new FontLoader;